% $Id$
\catcode`@=11
\input{formulas/defs.tex}
% Restore working plain macros that AMS-TeX wants us to replace with some crap
\def\cases#1{\left\{\,\vcenter{\normalbaselines\m@th
    \ialign{$##\hfil$&\quad##\hfil\crcr#1\crcr}}\right.}
\def\matrix#1{\null\,\vcenter{\normalbaselines\m@th
    \ialign{\hfil$##$\hfil&&\quad\hfil$##$\hfil\crcr
      \mathstrut\crcr\noalign{\kern-\baselineskip}
      #1\crcr\mathstrut\crcr\noalign{\kern-\baselineskip}}}\,}
\def\pmatrix#1{\left(\matrix{#1}\right)}
% Poor man's vectors, but better than silly arrows
\let\vec\mathbf
% Get rid of rev history and other ugly tables
\let\DBKdomitete=\relax
\setcounter{tocdepth}{5}
\setcounter{secnumdepth}{5}
% Format the title page
\def\DBKcover{
\ifthenelse{\equal{\DBKedition}{}}{\def\edhead{}}{\def\edhead{Ed. \DBKedition}}
{\thispagestyle{empty}\sffamily
\hrule height0pt
\vskip 0pt plus1filll
\begin{center}
\setlength{\baselineskip}{2\oldbaselineskip}
\Huge{\textbf{\DBKtitle}}
\end{center}
\vskip2cm
\begin{center}
\Large{\DBKauthor{}}
\end{center}
\vskip1cm
\begin{center}
\gwyreleaseinfo
\end{center}
\vskip 0pt plus3filll
}
\newpage
\chead[]{\DBKcheadfront}
\lfoot[]{}
}
% Fix chapter heads
\def\@makechapterhead#1{%
  {\parindent \z@ \raggedright \normalfont
    \ifnum \c@secnumdepth >\m@ne
        \sffamily\huge\bfseries \@chapapp\space \thechapter
        \par\nobreak
        \vskip 20\p@
    \fi
    \interlinepenalty\@M
    \sffamily\Huge\bfseries #1\par\nobreak
    \vskip 20\p@
  }}
\def\@makeschapterhead#1{%
  {\parindent \z@ \raggedright
    \normalfont
    \interlinepenalty\@M
    \sffamily\Huge\bfseries  #1\par\nobreak
    \vskip 20\p@
  }}
% Fix vertical spacing in TOC
\let\latex@dottedtocline=\@dottedtocline
\def\@dottedtocline{\parskip=1pt plus0.05pt\latex@dottedtocline}
% Format informal captions
\long\def\gwycaption#1{%
  \sbox\@tempboxa{#1}%
  \ifdim \wd\@tempboxa >\hsize
    \begingroup
    \leftskip=\z@skip \rightskip=\z@skip \parfillskip=0pt plus1fil\relax
    #1\par
    \endgroup
  \else
    #1\par
  \fi}
\catcode`@=12
